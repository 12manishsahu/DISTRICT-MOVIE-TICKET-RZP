<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book Tickets</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="top-header">
  <h1>ğŸŸï¸ Seat Selection</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="#support">Support</a>
  </nav>
</header>

<div class="booking-box">
  <h2 id="movieTitle"></h2>

  <label>Date</label>
  <input type="date" id="date" required>

  <label>Show Time</label>
  <select id="time">
    <option>9 AM</option>
    <option>12 PM</option>
    <option>3 PM</option>
    <option>6 PM</option>
    <option>9 PM</option>
  </select>

  <h3>Select Seats</h3>
  <div class="screen">SCREEN</div>
  <div class="seats" id="seats"></div>

  <p class="price">Seats: <span id="count">0</span></p>
  <p class="price">Total: â‚¹<span id="total">0</span></p>

  <button onclick="payNow()">Pay with Razorpay</button>
</div>

<footer id="support">
  <p>Help & Support</p>
  <p>ğŸ“ 9285247739</p>
  <p>ğŸ“§ 12manishsahu@gmail.com</p>
</footer>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script>
  const params = new URLSearchParams(window.location.search);
  document.getElementById("movieTitle").innerText = params.get("movie");

  const seatContainer = document.getElementById("seats");
  const seatPrice = 150;
  let selectedSeats = 0;

  for (let i = 1; i <= 40; i++) {
    const seat = document.createElement("div");
    seat.className = "seat";
    seat.innerText = i;

    seat.onclick = () => {
      seat.classList.toggle("selected");
      selectedSeats = document.querySelectorAll(".seat.selected").length;
      updatePrice();
    };

    seatContainer.appendChild(seat);
  }

  function updatePrice() {
    document.getElementById("count").innerText = selectedSeats;
    document.getElementById("total").innerText = selectedSeats * seatPrice;
  }

  function payNow() {
    if (selectedSeats === 0) {
      alert("Please select seats");
      return;
    }

    new Razorpay({
      key: "RAZORPAY_LIVE_KEY_HERE",
      amount: selectedSeats * seatPrice * 100,
      currency: "INR",
      name: "DISTRICT MOVIE TICKET RZP",
      description: "Movie Ticket",
      handler: res => alert("Payment Successful\nID: " + res.razorpay_payment_id),
      theme: { color: "#ff0055" }
    }).open();
  }
</script>

</body>
</html>
